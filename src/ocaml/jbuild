(jbuild_version 1)

(copy_files# c_links/math/*)
(copy_files# c_links/compression/*)
(copy_files# c_links/include/*)

;(env
; (dev
;  (cxx_flags (:standard -D__OCAML_VECTOR_VERBOSE -D__OCAML_MATH_OBJ_VERBOSE -D__OCAML_MATRIX_VERBOSE -D__OCAML_QUATERNION_VERBOSE)))
; (release
;  (cxx_flags (:standard -O3))))

(library 
 (
 (name atcflib)
 (public_name atcflib)
 (modules (atcflib))
  (libraries
    (bigarray re result unix)
  )
  (cxx_names
    (matrix vector quaternion bunzip
     ocaml_bunzip
     ocaml_math_obj ocaml_matrix ocaml_vector ocaml_quaternion ocaml_timer)
  )
  (cxx_flags
    (:standard -I atcf );-D__OCAML_VECTOR_VERBOSE -D__OCAML_MATH_OBJ_VERBOSE -D__OCAML_MATRIX_VERBOSE -D__OCAML_QUATERNION_VERBOSE)
  )
  (c_library_flags
   (:standard -lc++)
  )

 )
)

(executable (
  (name test_math)
  (modules (test_vector test_matrix test_math))
  (libraries (
  atcflib
  ounit
  ))
))

(alias (
  (name    run_test_math)
  (deps    (test_math.exe))
  (action  (run ${<}))
))
